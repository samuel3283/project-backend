#!groovy?
def GIT_COMMIT = ""
def GIT_BRANCH = ""
def GIT_URL = ""
def GIT_REPOSITORY = ""

node {
deleteDir()
stage('Descargar Fuentes') {
  scmGit = checkout scm
}
stage('Datos')
{	
sh "echo Verificando"


script {
   GIT_COMMIT = sh (
        script: 'git rev-parse HEAD',
        returnStdout: true
    ).trim()
    GIT_COMMIT = GIT_COMMIT.substring(0,8)

    GIT_BRANCH = sh (
        script: 'git name-rev --name-only HEAD | sed "s?.*remotes/origin/??"',
        returnStdout: true
    ).trim()

    GIT_URL = sh (
        script: 'git config --get remote.origin.url',
        returnStdout: true
    ).trim()

    GIT_REPOSITORY = GIT_URL.replaceFirst(/^.*\/([^\/]+?).git$/, '$1')
    
    GIT_REPO = sh (
        script: "echo '${GIT_URL}' | cut -d '/' -f6 | sed 's/\\.git//g' ",
        returnStdout: true
    ).trim()


    echo "Git url: ${GIT_URL}"
    echo "Git repo: ${GIT_REPO}"
    echo "Git repository: ${GIT_REPOSITORY}"
    echo "Git commit: ${GIT_COMMIT}"
    echo "Git branch: ${GIT_BRANCH}"

}



}



}
